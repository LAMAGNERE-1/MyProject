<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>JavaScript & DOM : Le Modèle Objet du Document - Exercice 23</title>
    <script>
      //Énoncé :

      /*Canvas*/

      /*
        L'objectif de cet exercice est d'apprendre à dessiner dans une balise Canvas
      */

      /*
        1. Créez une balise <canvas>. Vous devez impérativement renseigner ses attributs width et height.
      */

      /*
        2. Créez l'algorithme suivant : Quand on clique sur un paragraphe de texte, on déclenche un script qui récupère une référence à l'objet <canvas> (en utilisant la méthode .getElementById() par exemple). Vérifier à l'aide de la méthode .log() de la console que vous arrivez à récupérer un objet de type HTMLCanvasElement
      */

      /*
        L'objet correspondant à la balise <canvas> dispose d'une méthode .getContext() qui vous permet de récupérer un autre objet adapté au dessin 2d dans ce contexte. Voir la MDN ici : https://developer.mozilla.org/fr/docs/Web/API/CanvasRenderingContext2D
      */
  
      /*
        3. Créez l'algorithme suivant : Quand on clique sur un paragraphe de texte, on déclenche un script qui récupère une référence à l'objet <canvas> (en utilisant la méthode .getElementById() par exemple) et qui récupère le contexte de dessin 2d pour dessiner un carré dans le canvas.
      */
 
      /*
        4. Créez l'algorithme suivant : Quand on clique sur un paragraphe de texte, on déclenche un script qui récupère une référence à l'objet <canvas> (en utilisant la méthode .getElementById() par exemple) puis qui récupère le contexte de dessin 2d; qui efface de précédents dessins du contexte de dessin 2d;  qui dessine un carré avec un décalage de 2 pixels par rapport à la dernière fois qu'on a cliqué.
      */
      /*
        5. Créez un dessin animé à l'aide window.setTimeout(), puis avec window.setInterval() et enfin avec window.requestAnimationFrame()
      */
    </script>
  </head>
  <body>
    <h1>Titre principal</h1> 
    <ul>
      <li>Premier point</li>
      <li>Deuxième point</li>
      <li>Troisième point</li>
    </ul>
    <div>
      <div>
        <h2><span>1</span>. Titre de la première section</h2>
        <canvas width="1000px" height="350px" id="mycanvas"></canvas>
        <p><span>1.1</span>. Premier paragraphe de la première section et un <a href="#">lien</a>.</p>
        <p><span>1.2</span>. Deuxième paragraphe de la deuxième section et un <a href="#">lien</a>.</p>
      </div>
      <div>
        <h2><span>2</span>. Titre de la deuxième section</h2>
        <p><span>2.1</span>. Premier paragraphe de la deuxième section et un <a href="#">lien</a>.</p>
        <p><span>2.2</span>. Deuxième paragraphe de la deuxième section et un <a href="#">lien</a>.</p>
      </div>
      <div>
        <h2><span>3</span>. Titre de la troisième section</h2>
        <p><span>3.1</span>. Premier paragraphe de la troisième section et un <a href="#">lien</a>.</p>
        <p><span>3.2</span>. Deuxième paragraphe de la troisième section et un <a href="#">lien</a>.</p>
      </div>
    </div>
    <script>
      
      let largeur = 0;
      let longueur = 0;
      let coordX = 50;
      let coordY = 10;
      let g = 0;
      let b = 0;
      let j = 1;
      const myCanvas = document.getElementById('mycanvas');
      const ctx = myCanvas.getContext('2d');
      
      for (let i = 0, element = document.getElementsByTagName('p');element[i];i++) {
        element[i].addEventListener('click',monDessin);

        
        function monDessin() {
          if (longueur < 220) {
          ctx.clearRect(0,0,1000,400);
          ctx.lineWidth = 7; // Set line width for a filled square
          ctx.strokeStyle = 'yellow'; // Set line color for unfilled square
          g +=3;
          b +=2;
          var color = "rgb(200," + g + "," + b +")";
          ctx.fillStyle = color;
          largeur += 2;
          longueur += 2;
          coordX += 1;
          coordY += 1;
          j += 0.2;
          ctx.strokeRect(coordX, coordY, largeur, longueur); // Set an unfilled square
          ctx.fillRect(coordX, coordY, largeur, longueur); // Set a filled square
          requestAnimationFrame(monDessin);
          } else {
            largeur = 0;
            longueur = 0;
            coordX = 50;
            coordY = 10;
            g = 0;
            b = 0;
            j = 1;
          }
        }
       }
    </script>
  </body>
</html>